<HTML>
<HEAD>
<script type="text/javscript" src="AjaxRequest.js"></script>
<script type="text/javascript" src="util.js"></script>
<script type="text/javascript" src="al.js"></script>
</HEAD>

<BODY>
<script type="text/javascript" >

var req = false;
function sendReq(url, body){

if (!url){
	url=document.forms["test_reply"].url.value;
}
//alert (url);
//alert (body);
try
{
	req = new XMLHttpRequest();	
}	catch (trymicrosoft){
		try {
		req = new ActiveXObject("Msxm12.XMLHTTP");
		}
	catch (othermicrosoft){
		try{	
		req = new ActiveXobject("Microsoft.XMLHTTP");
		} 
	catch (fail){
		req = false;
	}
	}
	}

if (!req){
	alert ("error initializing AXAJ request!");
}
req.open("GET", url, true);
req.onreadystatechange = function() {prova_reply(req, body);};
req.send(null);
//var response = req.responseXML;
}

function prova_reply(req, body){
	
	if (req.readyState == 4) {
		
		if (req.status == 200){
	//		alert ("hei, siamo allo state 4 e tutto sembra ok!");
	        var myNode = document.importNode(req.responseXML.documentElement, true);
			var prova = replyTo(req, "empty body");
			}
			else{
			alert ("c'e' stato un problema con la ricezione.\n req.status:"+req.status);
		}
	}
}

</script>

<form name="test_reply">
	url della scheda(@localhost):
	<input value="http://localhost/poli-wiki/XML/scheda1.xml" name="url" type="text" /><BR>
	body della request:
	<input type="text" name="body" type="text"/><BR>
	
	<input type="button" value="request url" name="send" onClick="sendReq('', document.forms['test_reply'].body.value)"/>
</form>
</BODY>

</HTML>